{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap fabc05e403d97b963da3","webpack:///./src/index.js"],"names":[],"mappings":"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","file":"gpx.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"gpx\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"gpx\"] = factory();\n\telse\n\t\troot[\"gpx\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap fabc05e403d97b963da3\n **/","/**\n * GPX parser class\n * @class GPX\n */\nexport default class GPX{\n\n  /**\n   * GPX constructor.\n   * @param {string} gpxContent - The xml string of the GPX file.\n   * @constructs GPX\n   */\n  constructor( gpxContent ){\n    /**\n     * The xml string of the GPX file.\n     * @member GPX#gpxContent\n     */\n    this.gpxContent = gpxContent;\n\n    /**\n     * The parsed gpxContent into DOM.\n     * @member GPX#xmlDoc\n     */\n    this.xmlDoc = new DOMParser().parseFromString( this.gpxContent, 'application/xml' );\n\n    /**\n     * Object of all trkpts in the gpx DOM.\n     * @member GPX#trkpts\n     */\n    this.trkpts = this.xmlDoc.querySelectorAll( 'trkpt' );\n\n    /**\n     * Object of all waypoints as Array\n     * @member GPX#waypoints\n     */\n    this.waypoints = this.createJsonFromGpxDom();\n\n    if( this.waypoints.length === 0 ){\n      throw new Error( 'This file has no trackpointns (trkpt)' );\n    }\n  }\n\n  /**\n   * Loops over xml dom and returns array of objects\n   * @return {object} lon, lat, elevation, time\n   */\n  createJsonFromGpxDom(){\n    let waypoints = [];\n\n    for( let trkpt = 0; trkpt < this.trkpts.length; trkpt++ ){\n      waypoints.push( {\n        lon: parseFloat( this.trkpts[ trkpt ].getAttribute( 'lon' ) ),\n        lat: parseFloat( this.trkpts[ trkpt ].getAttribute( 'lat' ) ),\n        elevation: parseFloat( this.trkpts[ trkpt ].querySelector( 'ele' ).textContent ),\n        time: this.trkpts[ trkpt ].querySelector( 'time' ).textContent\n      } );\n    };\n\n    return waypoints;\n  }\n\n  /**\n   * Returns the duration of the run.\n   * @return {object} start, end, totalMS, total\n   */\n  duration(){\n    let start = new Date( this.waypoints[ 0 ].time ),\n      end = new Date( this.waypoints[ this.waypoints.length - 1 ].time ),\n      timeDiff = Math.abs( end.getTime() - start.getTime() ),\n      total = this.millisecondsToTime( timeDiff );\n\n    return {\n      start: start,\n      end: end,\n      totalMS: timeDiff,\n      total: total\n    };\n  }\n\n  /**\n   * Returns humanized time for miliseconds.\n   * @param {string} duration - Duration in milliseconds\n   * @return {string} time\n   */\n  millisecondsToTime( duration ){\n    let seconds = parseInt( ( duration / 1000 ) % 60, 10 ),\n      minutes = parseInt( ( duration / ( 1000 * 60 ) ) % 60, 10 ),\n      hours = parseInt( ( duration / ( 1000 * 60 * 60 ) ) % 24, 10 ),\n      days = parseInt( duration / ( 1000 * 60 * 60 * 24 ), 10 ),\n      hoursDays = parseInt( days * 24, 10 );\n\n    hours += hoursDays;\n    hours = ( hours < 10 ) ? '0' + hours : hours;\n    minutes = ( minutes < 10 ) ? '0' + minutes : minutes;\n    seconds = ( seconds < 10 ) ? '0' + seconds : seconds;\n    return ( hours === '00' ) ? minutes + ':' + seconds : hours + ':' + minutes + ':' + seconds;\n  }\n\n  /**\n   * Returns pace of the run.\n   * @param {number} duration - Duration in milliseconds.\n   * @param {number} distance - Distance in kilometers.\n   * @return {object} minutes, seconds\n   */\n  pace( duration = this.duration().totalMS, distance = this.distance() ){\n    let minutes = new Date( duration / distance ).getUTCMinutes(),\n      seconds = new Date( duration / distance ).getUTCSeconds();\n\n    return {\n      minutes: ( minutes < 10 ) ? '0' + minutes : minutes,\n      seconds: ( seconds < 10 ) ? '0' + seconds : seconds\n    };\n  }\n\n  /**\n   * Returns elevation of the run\n   * @return {object} elevation (time, dist, elevation), max, min, loss, gain\n   */\n  elevation(){\n    let eleForMinMax = [],\n      richElevation = [],\n      gain = 0, loss = 0,\n      startTime = new Date( this.waypoints[ 0 ].time ).getTime(),\n      dist = 0;\n\n    for( let i = 0; i < this.waypoints.length - 1; i++ ){\n      let diff = this.waypoints[ i + 1 ].elevation - this.waypoints[ i ].elevation,\n        time = new Date( this.waypoints[ i + 1 ].time ).getTime(),\n        timeDiff = Math.abs( time - startTime );\n\n      dist += this.calcDistanceBetweenPoints( this.waypoints[ i ], this.waypoints[ i + 1 ] );\n\n      if( diff < 0 ){\n        loss += diff;\n      }\n\n      if( diff > 0 ){\n        gain += diff;\n      }\n\n      eleForMinMax.push( this.waypoints[ i ].elevation );\n      richElevation.push( { elevation: this.waypoints[ i ].elevation, time: this.millisecondsToTime( timeDiff ), dist: dist } );\n    }\n\n    return {\n      elevation: richElevation,\n      max: Math.max.apply( null, eleForMinMax ),\n      min: Math.min.apply( null, eleForMinMax ),\n      loss: loss,\n      gain: gain\n    };\n  }\n\n  /**\n   * Returns distance of the run\n   * @return {number} distance in kilometers.\n   */\n  distance(){\n    let distanceInKm = 0;\n\n    for( let i = 0; i < this.waypoints.length - 1; i++ ){\n      distanceInKm += this.calcDistanceBetweenPoints( this.waypoints[ i ], this.waypoints[ i + 1 ] );\n    }\n\n    return distanceInKm;\n  }\n\n  /**\n   * Returns distance betwene points\n   * @param {node} wp1 - DOM node from gpx content\n   * @param {node} wp2 - DOM node from gpx content\n   * @return {number} distance\n   */\n  calcDistanceBetweenPoints( wp1, wp2 ){\n    let point1 = {\n        lat: wp1.lat * ( Math.PI / 180 ),\n        lon: wp1.lon * ( Math.PI / 180 ),\n        alt: wp1.elevation / 1000\n      },\n      point2 = {\n        lat: wp2.lat * ( Math.PI / 180 ),\n        lon: wp2.lon * ( Math.PI / 180 ),\n        alt: wp2.elevation / 1000\n      },\n      dp = 2 * Math.asin( Math.sqrt( Math.pow( Math.sin( ( point1.lat - point2.lat ) / 2 ), 2 ) + Math.cos( point1.lat ) * Math.cos( point2.lat ) * Math.pow( Math.sin( ( point1.lon - point2.lon ) / 2 ), 2 ) ) ),\n      d = dp * 6366,\n      h = Math.sqrt( Math.pow( d, 2 ) + Math.pow( point2.alt - point1.alt, 2 ) );\n\n    return h;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/index.js\n **/"],"sourceRoot":""}