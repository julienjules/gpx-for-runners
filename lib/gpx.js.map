{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 6a067afeb4e1d1f3b65a","webpack:///./src/index.js"],"names":[],"mappings":"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","file":"gpx.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"gpx\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"gpx\"] = factory();\n\telse\n\t\troot[\"gpx\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 6a067afeb4e1d1f3b65a\n **/","/**\n * GPX parser class\n * @class GPX\n */\nexport default class GPX{\n\n  /**\n   * GPX constructor.\n   * @param {string} gpxContent String of gpx XML data.\n   * @constructs GPX\n   */\n  constructor( gpxContent ){\n    /**\n     * string of gpx XML data.\n     * @member GPX#gpxContent\n     */\n    this.gpxContent = gpxContent;\n\n    /**\n     * The parsed gpx string into a DOM object.\n     * @member GPX#xmlDoc\n     */\n    this.xmlDoc = new DOMParser().parseFromString( this.gpxContent, 'application/xml' );\n\n    /**\n     * Object of all trackpointns in the gpx DOM.\n     * @member GPX#trkpts\n     */\n    this.trkpts = this.xmlDoc.querySelectorAll( 'trkpt' );\n\n    /**\n     * All trackpointns as an Array\n     * @member GPX#trackpointns\n     */\n    this.trackpointns = this.createJsonFromGpxDom();\n\n    if( this.trackpointns.length === 0 ){\n      throw new Error( 'This file has no trackpointns (trkpt)' );\n    }\n  }\n\n  /**\n   * @typedef TrackPoint\n   * @type Object\n   * @property {number} lon The lon coordinate of the trackpoint\n   * @property {number} lat The lat coordinate of the trackpoint\n   * @property {number} elevation The elevation in meters of the trackpoint\n   * @property {string} time The time of the trackpoint\n   */\n\n  /**\n   * Loops over gpx DOM and returns array of objects\n   * @return {TrackPoint} The trackpoint data\n   */\n  createJsonFromGpxDom(){\n    let trackpointns = [];\n\n    for( let trkpt = 0; trkpt < this.trkpts.length; trkpt++ ){\n      trackpointns.push( {\n        lon: parseFloat( this.trkpts[ trkpt ].getAttribute( 'lon' ) ),\n        lat: parseFloat( this.trkpts[ trkpt ].getAttribute( 'lat' ) ),\n        elevation: parseFloat( this.trkpts[ trkpt ].querySelector( 'ele' ).textContent ),\n        time: this.trkpts[ trkpt ].querySelector( 'time' ).textContent\n      } );\n    };\n\n    return trackpointns;\n  }\n\n  /**\n   * @typedef Duration\n   * @type Object\n   * @property {date} start The start time of the run as a Date object\n   * @property {date} end The end time of the run as a Date object\n   * @property {number} totalMS The duration of the run in miliseconds\n   * @property {string} total The duration of the run in human readable form\n   */\n\n  /**\n   * Returns the duration of the run.\n   * @return {Duration} The duration information of the run.\n   */\n  duration(){\n    let start = new Date( this.trackpointns[ 0 ].time ),\n      end = new Date( this.trackpointns[ this.trackpointns.length - 1 ].time ),\n      timeDiff = Math.abs( end.getTime() - start.getTime() ),\n      total = this.millisecondsToTime( timeDiff );\n\n    return {\n      start: start,\n      end: end,\n      totalMS: timeDiff,\n      total: total\n    };\n  }\n\n  /**\n   * Returns humanized time for miliseconds.\n   * @param {string} duration Duration in milliseconds\n   * @return {string} Readable time\n   */\n  millisecondsToTime( duration ){\n    let seconds = parseInt( ( duration / 1000 ) % 60, 10 ),\n      minutes = parseInt( ( duration / ( 1000 * 60 ) ) % 60, 10 ),\n      hours = parseInt( ( duration / ( 1000 * 60 * 60 ) ) % 24, 10 ),\n      days = parseInt( duration / ( 1000 * 60 * 60 * 24 ), 10 ),\n      hoursDays = parseInt( days * 24, 10 );\n\n    hours += hoursDays;\n    hours = ( hours < 10 ) ? '0' + hours : hours;\n    minutes = ( minutes < 10 ) ? '0' + minutes : minutes;\n    seconds = ( seconds < 10 ) ? '0' + seconds : seconds;\n    return ( hours === '00' ) ? minutes + ':' + seconds : hours + ':' + minutes + ':' + seconds;\n  }\n\n  /**\n   * @typedef Pace\n   * @type Object\n   * @property {number} minutes The minutes part of the pace time.\n   * @property {number} seconds The seconds part of the pace time.\n   */\n\n  /**\n   * Returns pace of the run.\n   * @param {number} duration Duration in milliseconds.\n   * @param {number} distance Distance in kilometers.\n   * @return {Pace} The Pace\n   */\n  pace( duration = this.duration().totalMS, distance = this.distance() ){\n    let minutes = new Date( duration / distance ).getUTCMinutes(),\n      seconds = new Date( duration / distance ).getUTCSeconds();\n\n    return {\n      minutes: ( minutes < 10 ) ? '0' + minutes : minutes,\n      seconds: ( seconds < 10 ) ? '0' + seconds : seconds\n    };\n  }\n\n  /**\n   * Returns elevation of the run\n   * @return {object} elevation (time, dist, elevation), max, min, loss, gain\n   */\n  elevation(){\n    let eleForMinMax = [],\n      richElevation = [],\n      gain = 0, loss = 0,\n      startTime = new Date( this.trackpointns[ 0 ].time ).getTime(),\n      dist = 0;\n\n    for( let i = 0; i < this.trackpointns.length - 1; i++ ){\n      let diff = this.trackpointns[ i + 1 ].elevation - this.trackpointns[ i ].elevation,\n        time = new Date( this.trackpointns[ i + 1 ].time ).getTime(),\n        timeDiff = Math.abs( time - startTime );\n\n      dist += this.calcDistanceBetweenPoints( this.trackpointns[ i ], this.trackpointns[ i + 1 ] );\n\n      if( diff < 0 ){\n        loss += diff;\n      }\n\n      if( diff > 0 ){\n        gain += diff;\n      }\n\n      eleForMinMax.push( this.trackpointns[ i ].elevation );\n      richElevation.push( { elevation: this.trackpointns[ i ].elevation, time: this.millisecondsToTime( timeDiff ), dist: dist } );\n    }\n\n    return {\n      elevation: richElevation,\n      max: Math.max.apply( null, eleForMinMax ),\n      min: Math.min.apply( null, eleForMinMax ),\n      loss: loss,\n      gain: gain\n    };\n  }\n\n  /**\n   * Returns distance of the run\n   * @return {number} distance in kilometers.\n   */\n  distance(){\n    let distanceInKm = 0;\n\n    for( let i = 0; i < this.trackpointns.length - 1; i++ ){\n      distanceInKm += this.calcDistanceBetweenPoints( this.trackpointns[ i ], this.trackpointns[ i + 1 ] );\n    }\n\n    return distanceInKm;\n  }\n\n  /**\n   * Returns distance betwene points\n   * @param {node} wp1 DOM node from gpx content\n   * @param {node} wp2 DOM node from gpx content\n   * @return {number} distance Distance between the points.\n   */\n  calcDistanceBetweenPoints( wp1, wp2 ){\n    let point1 = {\n        lat: wp1.lat * ( Math.PI / 180 ),\n        lon: wp1.lon * ( Math.PI / 180 ),\n        alt: wp1.elevation / 1000\n      },\n      point2 = {\n        lat: wp2.lat * ( Math.PI / 180 ),\n        lon: wp2.lon * ( Math.PI / 180 ),\n        alt: wp2.elevation / 1000\n      },\n      dp = 2 * Math.asin( Math.sqrt( Math.pow( Math.sin( ( point1.lat - point2.lat ) / 2 ), 2 ) + Math.cos( point1.lat ) * Math.cos( point2.lat ) * Math.pow( Math.sin( ( point1.lon - point2.lon ) / 2 ), 2 ) ) ),\n      d = dp * 6366,\n      h = Math.sqrt( Math.pow( d, 2 ) + Math.pow( point2.alt - point1.alt, 2 ) );\n\n    return h;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/index.js\n **/"],"sourceRoot":""}